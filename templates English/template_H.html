<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume - {{ name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        @media print {
            body {
                font-size: 10px;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .print-container {
                height: auto;
                max-height: none;
            }
            .page-break { page-break-before: always; }
            .break-inside-avoid { break-inside: avoid; }
            .avoid-page-break { page-break-inside: avoid; }
        }
        body { font-size: 10px; }
        
        .progress-fill {
            background-color: #fdb44b;
            height: 100%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="font-sans m-0 p-0 bg-white text-xs leading-snug">
    <div class="print-container">
        <div class="flex w-full min-h-screen border border-gray-300 p-4">
            <!-- Left Section -->
            <div class="w-2/5 bg-blue-900 text-white p-4 flex flex-col items-center" style="background-color: #0f2f5a;">
                <!-- <img src="{{ image or './images/profile_pic.png' }}" alt="{{ name }}" class="w-24 h-24 rounded-full border-4 border-white object-cover mb-2"> -->
                <div class="w-24 h-24 rounded-full border-4 border-white object-cover mb-2"></div>
                <!-- Personal Information -->
                <div class="w-full mb-2 mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">Personal Information</div>
                    <ul class="list-none p-0 w-full space-y-0">
                        <li class="mb-1 text-xs"><i class="fa fa-user mr-2"></i><span class="font-semibold">Name:</span> {{ name }}</li>
                        <li class="mb-1 text-xs"><i class="fa fa-location-dot mr-2"></i><span class="font-semibold">Address:</span> {{ address }}</li>
                        <li class="mb-1 text-xs"><i class="fa fa-envelope mr-2"></i><span class="font-semibold">Email:</span> {{ email }}</li>
                        <li class="mb-1 text-xs"><i class="fa fa-phone mr-2"></i><span class="font-semibold">Phone:</span> {{ telephone }}</li>
                        {% if linkedin %}
                        <li class="mb-1 text-xs"><i class="fa fa-linkedin mr-2"></i><span class="font-semibold">LinkedIn:</span> {{ linkedin }}</li>
                        {% endif %}
                    </ul>
                </div>

                <!-- Technical Skills -->
                <div class="w-full mb-2 mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">Technical Skills</div>
                    <div class="space-y-0.5">
                        {% for skill, level in skills.technical_skills.items() %}
                        <div class="mb-0.5">
                            <div class="text-xs font-medium text-white mb-0.5">{{ skill }}</div>
                            <div class="w-1/2 bg-gray-800 rounded-full h-1.5">
                                <div class="progress-fill h-1.5 rounded-full" style="width: {{ level }}%;"></div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Soft Skills -->
                <div class="w-full mb-2 mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">Soft Skills</div>
                    <div class="space-y-0.5">
                        {% for trait, score in skills.soft_skills.items() %}
                        <div class="mb-0.5">
                            <div class="text-xs font-medium text-white mb-0.5">{{ trait }}</div>
                            <div class="w-1/2 bg-gray-800 rounded-full h-1.5">
                                <div class="progress-fill h-1.5 rounded-full" style="width: {{ score }}%;"></div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Languages -->
                {% if language %}
                <div class="w-full mb-2 mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">Languages</div>
                    <ul class="list-none p-0 w-full space-y-0">
                        {% for lang in language %}
                            {% for k, v in lang.items() %}
                            <li class="mb-1 text-xs"><span class="font-semibold">{{ k }}:</span> {{ v|capitalize }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <!-- Certifications -->
                {% if certification %}
                <div class="w-full mb-2 mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">Certifications</div>
                    <ul class="list-none p-0 w-full space-y-0">
                        {% for cert in certification %}
                        <li class="mb-1 text-xs">{{ cert.title }}{% if cert.issuer %} - {{ cert.issuer }}{% endif %}, {{ cert.date }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <!-- Education (Moved to Left Column) -->
                <div class="w-full mb-2 mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">Education</div>
                    <div class="space-y-1">
                        {% for edu in education %}
                        <div class="break-inside-avoid avoid-page-break">
                            <div class="text-xs font-semibold text-white">{{ edu.level }}</div>
                            <div class="text-xs text-gray-300">{{ edu.institution }} {% if edu.duration %}| {{ edu.duration }}{% endif %}</div>
                            {% if edu.details %}<ul class="list-disc list-inside text-xs mt-0.5 space-y-0 ml-2"><li>{{ edu.details }}</li></ul>{% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- References (Left side only if no achievements and no extracurricular activities) -->
                {% if not achievement and not extracurricular_activities %}
                <div class="w-full mt-2">
                    <div class="text-center font-bold py-2 mb-1 rounded-2xl text-xs uppercase text-black" style="background-color: #fdb44b;">References</div>
                    <div class="space-y-1">
                        {% for ref in reference %}
                        <div class="break-inside-avoid avoid-page-break text-xs">
                            <div class="font-semibold text-white">{{ ref.name }}</div>
                            <div class="text-gray-300">{{ ref.position }}, {{ ref.company }}</div>
                            {% if ref.email %}<div class="text-gray-300">Email: {{ ref.email }}</div>{% endif %}
                            {% if ref.telephone %}<div class="text-gray-300">Phone: {{ ref.telephone }}</div>{% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Right Section -->
            <div class="w-3/5 p-4 bg-white">
                <h1 class="text-lg font-bold m-0 mb-1 uppercase" style="color: #0f2f5a;">{{ name }}</h1>
                <div class="text-gray-600 text-base font-normal m-0 mb-2">{{ title }}</div>

                <!-- About Me -->
                <div class="mb-2">
                    <div class="font-bold py-2 px-3 mb-1 rounded-2xl inline-block text-xs uppercase text-black" style="background-color: #fdb44b;">About Me</div>
                    <p class="text-justify leading-snug text-sm">{{ about }}</p>
                </div>

                <!-- Work Experience Logic - Dynamic details based on number of companies -->
                {% if experience %}
                <div class="mb-2">
                    <div class="font-bold py-2 px-3 mb-1 rounded-2xl inline-block text-xs uppercase text-black" style="background-color: #fdb44b;">Experience</div>
                    {% set exp_count = experience|length %}
                    <div class="space-y-1.5">
                        {% for job in experience %}
                        <div class="break-inside-avoid avoid-page-break">
                            <h4 class="text-base font-semibold" style="color: #0f2f5a;">{{ job.company }}</h4>
                            <p class="text-xs italic text-gray-600">{{ job.title }} â€“ {{ job.location }} ({{ job.duration }})</p>
                            <ul class="text-justify list-disc list-inside text-sm mt-0.5 space-y-0">
                                {% if exp_count == 3 %}
                                    {% for bullet in job.details[:3] %}
                                    <li>{{ bullet }}</li>
                                    {% endfor %}
                                {% elif exp_count == 2 %}
                                    {% for bullet in job.details[:4] %}
                                    <li>{{ bullet }}</li>
                                    {% endfor %}
                                {% elif exp_count == 1 %}
                                    {% for bullet in job.details[:6] %}
                                    <li>{{ bullet }}</li>
                                    {% endfor %}
                                {% else %}
                                    {% for bullet in job.details %}
                                    <li>{{ bullet }}</li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <!-- No work experience = generate 6 strengths (reduced from 8) -->
                <div class="mb-2">
                    <div class="font-bold py-2 px-3 mb-1 rounded-2xl inline-block text-xs uppercase text-black" style="background-color: #fdb44b;">Strengths</div>
                    <ul class="text-justify list-disc list-inside text-sm space-y-0">
                        {% for s in strength[:6] %}
                        <li>{{ s }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Second Page Logic - Show if achievements OR extracurricular activities exist -->
        {% if achievement or extracurricular_activities %}
        <div class="page-break"></div>
        <div class="w-full min-h-screen p-4 bg-white">
            {% if achievement %}
            <div class="mb-2 mt-2">
                <div class="font-bold py-2 px-3 mb-1 rounded-2xl inline-block text-xs uppercase text-black" style="background-color: #fdb44b;">Achievements</div>
                <ul class="list-disc pl-5 space-y-0">
                    {% for item in achievement %}
                    <li class="text-sm">{{ item }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if extracurricular_activities %}
            <div class="mb-2 mt-2">
                <div class="font-bold py-2 px-3 mb-1 rounded-2xl inline-block text-xs uppercase text-black" style="background-color: #fdb44b;">Extracurricular Activities</div>
                <ul class="list-disc pl-5 space-y-0">
                    {% for activity in extracurricular_activities %}
                    <li class="text-sm">
                        <span class="font-semibold">{{ activity.title }}</span> ({{ activity.date }})
                        {% if activity.details %} - {{ activity.details }}{% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <!-- References on Page 2 -->
            <div class="mb-2 mt-2">
                <div class="font-bold py-2 px-3 mb-1 rounded-2xl inline-block text-xs uppercase text-black" style="background-color: #fdb44b;">References</div>
                <div class="space-y-1">
                    {% for ref in reference %}
                    <div class="break-inside-avoid avoid-page-break text-sm">
                        <div class="font-semibold" style="color: #0f2f5a;">{{ ref.name }}</div>
                        <div class="text-gray-600">{{ ref.position }}, {{ ref.company }}</div>
                        {% if ref.email %}<div class="text-gray-600">Email: {{ ref.email }}</div>{% endif %}
                        {% if ref.telephone %}<div class="text-gray-600">Phone: {{ ref.telephone }}</div>{% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</body>
</html>