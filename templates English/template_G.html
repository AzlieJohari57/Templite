<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume {{ name }}</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      body {
        font-size: 10px;
        margin: 0;
        padding: 0;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .print-container {
        height: auto;
        max-height: none;
      }
      .page-break { page-break-before: always; }
      .break-inside-avoid { break-inside: avoid; }
      .avoid-page-break { page-break-inside: avoid; }
    }

    body {
      font-size: 10px;
      margin: 0;
      padding: 0;
    }
    
    .left-section {
      background: linear-gradient(135deg, #d4a574 0%, #c49464 100%);
    }
    .left-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.05);
      pointer-events: none;
    }
    .progress-fill {
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="m-0 p-0 font-sans bg-gray-50 leading-snug print-container">
  <!-- First Page - Full Width -->
  <div class="flex bg-white w-full h-screen overflow-hidden">
    <!-- Left Column -->
    <div class="flex-1 left-section text-gray-800 p-4 flex flex-col items-center relative">
      <img src="{{ image or './images/female_profile_pic.png' }}" alt="{{ name }}" 
           class="w-20 h-20 mb-2 border-2 border-white border-opacity-90 rounded-full shadow-lg relative z-10">

      <!-- Contact Info -->
      <div class="w-full mb-2">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">Contact</h2>
        <ul class="space-y-0 text-xs">
          <li class="flex items-center"><i class="fa fa-user w-3 mr-2 opacity-80"></i><span class="text-base">{{ name }}</span></li>
          <li class="flex items-center"><i class="fa fa-location-dot w-3 mr-2 opacity-80"></i><span class="text-base">{{ address }}</span></li>
          <li class="flex items-center"><i class="fa fa-envelope w-3 mr-2 opacity-80"></i><span class="text-base">{{ email }}</span></li>
          <li class="flex items-center"><i class="fa fa-phone w-3 mr-2 opacity-80"></i><span class="text-base">{{ telephone }}</span></li>
          {% if linkedin %}
          <li class="flex items-center"><i class="fa fa-linkedin w-3 mr-2 opacity-80"></i><span class="text-base">{{ linkedin }}</span></li>
          {% endif %}
        </ul>
      </div>

      <!-- Technical Skills -->
      <div class="w-full mb-2">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">Technical Skills</h2>
        <div class="space-y-0.5">
          {% for skill, level in skills.technical_skills.items() %}
          <div class="mb-0.5">
            <div class="text-xs font-medium text-gray-700 mb-0.5">{{ skill }}</div>
            <div class="w-full bg-gray-200 rounded-full h-1.5">
              <div class="progress-fill h-1.5 rounded-full" style="width: {{ level }}%;"></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Soft Skills -->
      <div class="w-full mb-2">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">Soft Skills</h2>
        <div class="space-y-0.5">
          {% for trait, score in skills.soft_skills.items() %}
          <div class="mb-0.5">
            <div class="text-xs font-medium text-gray-700 mb-0.5">{{ trait }}</div>
            <div class="w-full bg-gray-200 rounded-full h-1.5">
              <div class="progress-fill h-1.5 rounded-full" style="width: {{ score }}%;"></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Languages -->
      {% if language %}
      <div class="w-full mb-2">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">Languages</h2>
        <ul class="space-y-0 text-xs">
          {% for lang in language %}
            {% for k, v in lang.items() %}
            <li><span class="font-medium">{{ k }}:</span> {{ v|capitalize }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <!-- Certifications -->
      {% if certification %}
      <div class="w-full mb-2">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">Certifications</h2>
        <ul class="space-y-0 text-xs">
          {% for cert in certification %}
          <li>{{ cert.title }}{% if cert.issuer %} - {{ cert.issuer }}{% endif %}, {{ cert.date }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <!-- Education (Moved to Left Column) -->
      <div class="w-full mb-2">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">Education</h2>
        <div class="space-y-1">
          {% for edu in education %}
          <div class="text-xs break-inside-avoid avoid-page-break">
            <div class="font-semibold">{{ edu.level }}</div>
            <div class="text-xs">{{ edu.institution }}{% if edu.duration %} | {{ edu.duration }}{% endif %}</div>
            {% if edu.details %}<div class="text-xs mt-0.5">{{ edu.details }}</div>{% endif %}
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- References (if no second page) -->
      {% if not achievement and not extracurricular_activities %}
      <div class="w-full">
        <h2 class="text-lg font-bold mb-1 pb-1 border-b-2 border-white border-opacity-70 uppercase tracking-wide text-gray-800 relative z-10">References</h2>
        <div class="space-y-1">
          {% for ref in reference %}
          <div class="text-xs break-inside-avoid avoid-page-break">
            <div class="font-semibold">{{ ref.name }}</div>
            <div>{{ ref.position }}, {{ ref.company }}</div>
            {% if ref.email %}<div>{{ ref.email }}</div>{% endif %}
            {% if ref.telephone %}<div>{{ ref.telephone }}</div>{% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Right Column -->
    <div class="flex-2 p-4 bg-white" style="flex: 2;">
      <!-- Header -->
      <h1 class="text-lg font-bold mb-1 text-gray-800 tracking-tight">{{ name }}</h1>
      <div class="text-base italic text-gray-600 mb-2">{{ title }}</div>

      <!-- About Me -->
      <div class="mb-2">
        <h2 class="text-lg font-bold text-amber-600 mb-1 uppercase tracking-wide">About Me</h2>
        <hr class="border-none h-0.5 bg-gradient-to-r from-amber-600 to-amber-300 mb-1 rounded">
        <p class="text-sm leading-snug">{{ about }}</p>
      </div>

      <!-- Experience or Strengths -->
      {% if experience %}
      <div class="mb-2">
        <h2 class="text-lg font-bold text-amber-600 mb-1 uppercase tracking-wide">Experience</h2>
        <hr class="border-none h-0.5 bg-gradient-to-r from-amber-600 to-amber-300 mb-1 rounded">
        <div class="space-y-1.5">
          {% for job in experience %}
          <div class="break-inside-avoid avoid-page-break pl-3 ml-0 border-l-3 border-amber-600 bg-amber-50 bg-opacity-30 rounded-r-md py-1">
            <h4 class="text-base font-semibold">{{ job.company }}</h4>
            <p class="text-xs italic text-gray-600">{{ job.title }} â€“ {{ job.location }} ({{ job.duration }})</p>
            <ul class="list-disc list-inside text-sm mt-0.5 space-y-0">
              {% set detail_limit = 3 if experience|length == 3 else (4 if experience|length == 2 else 6) %}
              {% for bullet in job.details[:detail_limit] %}
              <li class="text-gray-600">{{ bullet }}</li>
              {% endfor %}
            </ul>
          </div>
          {% endfor %}
        </div>
      </div>
      {% else %}
      <div class="mb-2">
        <h2 class="text-lg font-bold text-amber-600 mb-1 uppercase tracking-wide">Core Strengths</h2>
        <hr class="border-none h-0.5 bg-gradient-to-r from-amber-600 to-amber-300 mb-1 rounded">
        <ul class="list-disc list-inside text-sm space-y-0 ml-2">
          {% for s in strength[:6] %}
          <li class="text-gray-600">{{ s }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Second Page (Conditional) -->
  {% if achievement or extracurricular_activities or (experience and experience|length > 0) %}
  <div class="page-break"></div>
  <div class="bg-white w-full h-screen overflow-hidden">
    <div class="p-4 h-full">
      {% if achievement %}
      <div class="mb-2">
        <h2 class="text-lg font-bold text-amber-600 mb-1 uppercase tracking-wide">Achievements</h2>
        <hr class="border-none h-0.5 bg-gradient-to-r from-amber-600 to-amber-300 mb-1 rounded">
        <ul class="list-disc list-inside text-sm space-y-0 ml-2">
          {% for item in achievement %}
          <li class="text-gray-600">{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% if extracurricular_activities %}
      <div class="mb-2">
        <h2 class="text-lg font-bold text-amber-600 mb-1 uppercase tracking-wide">Extracurricular Activities</h2>
        <hr class="border-none h-0.5 bg-gradient-to-r from-amber-600 to-amber-300 mb-1 rounded">
        <ul class="list-disc list-inside text-sm space-y-0 ml-2">
          {% for activity in extracurricular_activities %}
          <li class="text-gray-600"><span class="font-semibold">{{ activity.title }}</span> ({{ activity.date }}){% if activity.details %} - {{ activity.details }}{% endif %}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <!-- References on Page 2 -->
      <div class="mb-2">
        <h2 class="text-lg font-bold text-amber-600 mb-1 uppercase tracking-wide">References</h2>
        <hr class="border-none h-0.5 bg-gradient-to-r from-amber-600 to-amber-300 mb-1 rounded">
        <div class="space-y-1">
          {% for ref in reference %}
          <div class="break-inside-avoid avoid-page-break pl-3 ml-0 border-l-3 border-amber-600 bg-amber-50 bg-opacity-30 rounded-r-md py-2">
            <div class="font-semibold text-sm">{{ ref.name }}</div>
            <div class="text-sm">{{ ref.position }}, {{ ref.company }}</div>
            {% if ref.email %}<div class="text-sm">Email: {{ ref.email }}</div>{% endif %}
            {% if ref.telephone %}<div class="text-sm">Phone: {{ ref.telephone }}</div>{% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</body>
</html>